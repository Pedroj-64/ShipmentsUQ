<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>

<ScrollPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            stylesheets="@../css/payments.css"
            fitToWidth="true"
            fitToHeight="true"
            pannable="true">
    <content>
        <BorderPane prefWidth="950.0" prefHeight="600.0">

            <!-- Zona superior (top) -->
            <top>
                <HBox alignment="CENTER" styleClass="header-container">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20" />
                    </padding>
                    <Label text="Gestión de Pagos" styleClass="title-label" />
                </HBox>
            </top>
    
    <!-- Zona izquierda (left) - Formulario de pago simulado -->
    <left>
        <VBox styleClass="form-container" prefWidth="320" maxWidth="320">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15" />
            </padding>
            
            <Label text="Registrar Pago" styleClass="section-title" />
            <Separator />
            
            <GridPane hgap="10" vgap="10" styleClass="payment-form">
                <padding>
                    <Insets top="20" right="0" bottom="20" left="0" />
                </padding>
                
                <columnConstraints>
                    <ColumnConstraints hgrow="NEVER" minWidth="120" />
                    <ColumnConstraints hgrow="ALWAYS" minWidth="150" />
                </columnConstraints>
                
                <!-- ID del Envío -->
                <Label text="ID del Envío:" styleClass="form-label" 
                       GridPane.rowIndex="0" GridPane.columnIndex="0" />
                <TextField fx:id="txt_shipmentId" promptText="Ingrese ID del envío" 
                          GridPane.rowIndex="0" GridPane.columnIndex="1" />
                
                <!-- Monto -->
                <Label text="Monto:" styleClass="form-label" 
                       GridPane.rowIndex="1" GridPane.columnIndex="0" />
                <TextField fx:id="txt_amount" promptText="Ej: 50000" 
                          GridPane.rowIndex="1" GridPane.columnIndex="1" />
                
                <!-- Método de pago -->
                <Label text="Método de pago:" styleClass="form-label" 
                       GridPane.rowIndex="2" GridPane.columnIndex="0" />
                <ChoiceBox fx:id="chb_paymentMethod" 
                          GridPane.rowIndex="2" GridPane.columnIndex="1" maxWidth="Infinity" />
                
                <!-- Fecha de vencimiento -->
                <Label text="Fecha vencimiento:" styleClass="form-label" 
                       GridPane.rowIndex="3" GridPane.columnIndex="0" />
                <DatePicker fx:id="dp_dueDate" promptText="Fecha límite de pago"
                          GridPane.rowIndex="3" GridPane.columnIndex="1" maxWidth="Infinity" />
                
                <!-- Referencia o comentario -->
                <Label text="Referencia:" styleClass="form-label" 
                       GridPane.rowIndex="4" GridPane.columnIndex="0" />
                <TextField fx:id="txt_reference" promptText="Referencia o comentario (opcional)" 
                          GridPane.rowIndex="4" GridPane.columnIndex="1" />
            </GridPane>
            
            <!-- Sección de tarjeta de crédito (visible condicional) -->
            <VBox styleClass="card-section" fx:id="vbox_cardSection">
                <Label text="Datos de Tarjeta" styleClass="subsection-title" />
                
                <GridPane hgap="10" vgap="10">
                    <padding>
                        <Insets top="10" right="0" bottom="10" left="0" />
                    </padding>
                    
                    <columnConstraints>
                        <ColumnConstraints hgrow="NEVER" minWidth="120" />
                        <ColumnConstraints hgrow="ALWAYS" minWidth="150" />
                    </columnConstraints>
                    
                    <!-- Número de tarjeta -->
                    <Label text="Número:" styleClass="form-label" 
                           GridPane.rowIndex="0" GridPane.columnIndex="0" />
                    <TextField fx:id="txt_cardNumber" promptText="XXXX-XXXX-XXXX-XXXX" 
                              GridPane.rowIndex="0" GridPane.columnIndex="1" />
                    
                    <!-- Fecha de expiración -->
                    <Label text="Expiración:" styleClass="form-label" 
                           GridPane.rowIndex="1" GridPane.columnIndex="0" />
                    <TextField fx:id="txt_cardExpiry" promptText="MM/AA" 
                              GridPane.rowIndex="1" GridPane.columnIndex="1" />
                    
                    <!-- Código CVV -->
                    <Label text="CVV:" styleClass="form-label" 
                           GridPane.rowIndex="2" GridPane.columnIndex="0" />
                    <PasswordField fx:id="txt_cardCvv" promptText="123" 
                                  GridPane.rowIndex="2" GridPane.columnIndex="1" />
                </GridPane>
            </VBox>
            
            <!-- Botones para el formulario de pago -->
            <HBox alignment="CENTER" spacing="10" styleClass="form-buttons">
                <padding>
                    <Insets top="20" right="0" bottom="0" left="0" />
                </padding>
                <Button fx:id="btn_pay" text="Pagar" styleClass="pay-button" />
                <Button fx:id="btn_clear" text="Limpiar" styleClass="clear-button" />
            </HBox>
        </VBox>
    </left>
    
    <!-- Zona central (center) - Historial de pagos -->
    <center>
        <VBox spacing="10" styleClass="history-container">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15" />
            </padding>
            
            <Label text="Historial de Pagos" styleClass="section-title" />
            
            <!-- Filtros para el historial -->
            <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-container">
                <Label text="Filtrar por fecha:" styleClass="filter-label" />
                <DatePicker fx:id="dp_filterDate" />
                <Label text="Estado:" styleClass="filter-label" />
                <ChoiceBox fx:id="chb_filterStatus" />
                <Button fx:id="btn_filter" text="Filtrar" styleClass="filter-button" />
                <Button fx:id="btn_clearFilter" text="Limpiar" styleClass="clear-filter-button" />
            </HBox>
            
            <!-- Tabla de pagos -->
            <TableView fx:id="tbl_payments" VBox.vgrow="ALWAYS" maxHeight="350">
                <columns>
                    <TableColumn fx:id="col_id" text="ID Pago" prefWidth="70" />
                    <TableColumn fx:id="col_date" text="Fecha" prefWidth="90" />
                    <TableColumn fx:id="col_shipmentId" text="ID Envío" prefWidth="70" />
                    <TableColumn fx:id="col_amount" text="Monto" prefWidth="90" />
                    <TableColumn fx:id="col_method" text="Método" prefWidth="100" />
                    <TableColumn fx:id="col_status" text="Estado" prefWidth="90" />
                </columns>
                <placeholder>
                    <Label text="No hay pagos registrados" />
                </placeholder>
            </TableView>
            
            <!-- Botones para el historial de pagos -->
            <HBox alignment="CENTER" spacing="15" styleClass="history-buttons">
                <Button fx:id="btn_viewReceipt" text="Ver Comprobante" styleClass="receipt-button" disable="true" />
                <Button fx:id="btn_downloadReport" text="Descargar Reporte" styleClass="report-button" />
            </HBox>
        </VBox>
    </center>
    
    <!-- Zona inferior (bottom) - Mensajes del sistema -->
    <bottom>
        <HBox alignment="CENTER_LEFT" styleClass="status-container">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20" />
            </padding>
            <Label fx:id="lbl_status" text="" styleClass="status-label" />
        </HBox>
    </bottom>
    
        </BorderPane>
    </content>
</ScrollPane>